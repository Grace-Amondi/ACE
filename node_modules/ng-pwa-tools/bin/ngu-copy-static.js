#!/usr/bin/env node_modules/.bin/ts-node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var fs = require("fs");
var path = require("path");
var util_1 = require("../lib/common/util");
var cwd = process.cwd();
var tsconfigPath = path.join(cwd, 'tsconfig.json');
if (!fs.existsSync(tsconfigPath)) {
    console.error('Please run ng-pwa-copy-static from a directory with your project\'s tsconfig.json.');
    process.exit(1);
}
var tsconfig = JSON.parse(fs.readFileSync(tsconfigPath).toString());
var outDir = tsconfig['compilerOptions']['outDir'];
var count = 0;
function copyFile(file) {
    count++;
    var contents = fs.readFileSync(path.join(cwd, file));
    fs.writeFileSync(path.join(cwd, outDir, file), contents);
}
process
    .argv
    .slice(2)
    .map(function (dir) { return util_1.recursiveListDir(path.join(cwd, dir))
    .map(function (file) { return path.join(dir, file); }); })
    .reduce(function (acc, files) { return acc.concat(files); }, [])
    .filter(function (file) { return file.toLowerCase().endsWith('.html') || file.toLowerCase().endsWith('.css'); })
    .forEach(function (file) { return copyFile(file); });
console.log("Copied " + count + " .html and .css files into " + outDir);
